---
Description: キーボードを使い慣れているパワー ユーザーと、障碍やその他のアクセシビリティ要件を持っているユーザーの両方に考えられる最適なエクスペリエンスを提供できるように、UWP アプリを最適化する方法について説明します。
title: キーボード操作
ms.assetid: FF819BAC-67C0-4EC9-8921-F087BE188138
label: Keyboard interactions
template: detail.hbs
keywords: キーボード, アクセシビリティ, ナビゲーション, フォーカス, テキスト, 入力, ユーザーの操作, ゲームパッド, リモート
ms.date: 03/29/2017
ms.topic: article
pm-contact: chigy
design-contact: kimsea
dev-contact: niallm
doc-status: Published
ms.openlocfilehash: e3fcf6b792990fad9cb0071aece878cac31f5420
ms.sourcegitcommit: b034650b684a767274d5d88746faeea373c8e34f
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/06/2019
ms.locfileid: "57662917"
---
# <a name="keyboard-interactions"></a>キーボード操作

![キーボードのヒーロー画像](images/keyboard/keyboard-hero.jpg)

キーボードを使い慣れているパワー ユーザーと、障碍やその他のアクセシビリティ要件を持っているユーザーの両方に考えられる最適なエクスペリエンスを提供できるように、UWP アプリを最適化する方法について説明します。

さまざまなデバイスを使う場合、キーボード入力はユニバーサル Windows プラットフォーム (UWP) の全体的な対話式操作エクスペリエンスの重要な部分を占めます。 適切に設計されたキーボード エクスペリエンスがあれば、ユーザーが効率的にアプリの UI を移動し、手を持ち上げなくてもそのすべての機能にキーボードからアクセスできます。

![キーボードとゲームパッドのイメージ](images/keyboard/keyboard-gamepad.jpg)

***一般的な相互作用のパターンは、キーボード、ゲームパッドの間で共有されます。***

このトピックでは、PC におけるキーボード入力の UWP アプリの設計について重点的に説明します。 ただし、適切に設計されたキーボード エクスペリエンスは、Windows ナレーターなどのユーザー補助ツールをサポートするための重要なを使用して[ソフトウェア キーボード](#software-keyboard)タッチ キーボードやスクリーン キーボード (OSK)、およびその他の処理Xbox ゲームパッド、リモート制御など、デバイスの種類を入力します。

[フォーカスの視覚効果](#focus-visuals)、[アクセス キー](#access-keys)、[UI ナビゲーション](#navigation) など、ここで説明するガイドラインと推奨事項の多くは、これらの他のシナリオにも当てはまります。

**注:**  テキスト入力はハードウェア キーボードとソフトウェア キーボードの両方に使用されますが、このトピックではナビゲーションと対話式操作に焦点を当てます。

## <a name="built-in-support"></a>組み込みサポート

マウスと共に、キーボードは PC で最もよく使われている周辺機器であるため、PC のエクスペリエンスの基本となる部分です。 PC ユーザーは、キーボード入力への応答として、システムと個々のアプリの両方から総合的で一貫性のあるエクスペリエンスがあることを期待します。

すべての UWP コントロールには、キーボードの豊富なエクスペリエンスとユーザー操作の組み込みサポートが含まれていますが、プラットフォーム自体にはカスタム コントロールとアプリの両方で最適と感じるキーボード エクスペリエンスを生み出すための広範な基盤が用意されています。

![キーボードと携帯電話の画像](images/keyboard/keyboard-phone.jpg)

***UWP は、任意のデバイスでのキーボードをサポートしています***

## <a name="basic-experiences"></a>基本的なエクスペリエンス
![フォーカス ベースのデバイス](images/keyboard/focus-based-devices.jpg)

前述のように、Xbox ゲームパッドやリモコンなどの入力デバイスと、ナレーターなどのアクセシビリティ ツールは、ナビゲーションとコマンド実行においてキーボードの入力エクスペリエンスの大半を共有します。 入力の種類とツールが異なってもエクスペリエンスが共通であれば、ユーザーの追加作業は最小限に抑えられ、ユニバーサル Windows プラットフォームの "1 回のビルドで、どこでも実行可能" という目標に貢献します。

必要に応じて、する必要がありますに注意してくださいし、検討する必要があります、軽減策について説明します主な相違点を特定します。

このトピックで説明するデバイスとツールを次に示します。

| デバイス/ツール                       | 説明     |
|-----------------------------------|-----------------|
|キーボード (ハードウェアおよびソフトウェア)   |UWP アプリケーションが 2 つのソフトウェアのキーボードをサポートするだけでなく、標準のハードウェア キーボード:[タッチ (またはソフトウェア) のキーボード](#software-keyboard)と[スクリーン キーボード](#on-screen-keyboard)します。|
|ゲームパッドとリモート制御         |Xbox のゲームパッドとリモコンは、[10 フィート エクスペリエンス](../devices/designing-for-tv.md)における基本的な入力デバイスです。 UWP におけるゲームパッドとリモコンのサポートについて詳しくは、「[ゲームパッドとリモコンの操作](gamepad-and-remote-interactions.md)」をご覧ください。|
|スクリーン リーダー (ナレーター)          |ナレーターは、独自の操作エクスペリエンスと機能を提供する Windows の組み込みスクリーン リーダーですが、依然として基本的なキーボード ナビゲーションと入力に依存しています。 ナレーターについて詳しくは、「[ナレーターの概要](https://support.microsoft.com/help/22798/windows-10-narrator-get-started)」をご覧ください。|

## <a name="custom-experiences-and-efficient-keyboarding"></a>カスタム エクスペリエンスと効率的なキーボード操作
前述のとおり、さまざまなスキル、能力、期待を持ったユーザーにとってアプリケーションが十分に機能するために、キーボードのサポートは重要です。 次の点を重視することをお勧めします。
- キーボードを使った操作のサポート
    - 操作可能な項目をタブ位置として定義します (操作可能でない項目は、そうしないようにします)。ナビゲーションの順序が論理的かつ予測可能であるようにします ([タブ位置](#tab-stops)をご覧ください)。
    - 初期フォーカスは、最も論理的な要素に設定します ([初期フォーカス](#initial-focus) をご覧ください)。
    - "内部ナビゲーション" には矢印キーのナビゲーションを提供します ([ナビゲーション](#navigation)をご覧ください)。
- キーボード ショートカットのサポート
    - クイック アクションのためのアクセラレータ キーを提供します ([アクセラレータ](#accelerators)をご覧ください)。
    - アプリケーションの UI を移動するアクセス キーを指定 (を参照してください[アクセス キー](access-keys.md))

### <a name="focus-visuals"></a>フォーカスのビジュアル

UWP は、あらゆる入力の種類とエクスペリエンスで適切に動作する 1 つのフォーカスの視覚効果デザインをサポートしています。
![フォーカス ビジュアル](images/keyboard/focus-visual.png)

フォーカスの視覚効果には次のような特徴があります。

- UI 要素がキーボードやゲームパッド/リモコンからフォーカスを受け取ったときに表示されます。
- 実行すべき操作を示すため、強調表示された境界線および UI 要素としてレンダリングされます。
- ユーザーが迷わすにアプリの UI を移動するのに役立ちます。
- アプリ用にカスタマイズできます (「[視認性の高いフォーカスの視覚効果](guidelines-for-visualfeedback.md#high-visibility-focus-visuals)」をご覧ください)。

**注:** UWP のフォーカスの視覚効果は、ナレーターのフォーカスの四角形と同じではありません。

### <a name="tab-stops"></a>タブ位置

キーボードでコントロール (ナビゲーション要素を含む) を操作するには、そのコントロールがフォーカスを取得する必要があります。 キーボード フォーカスを受け取るコントロールの 1 つの方法がタブとして識別する、タブのナビゲーションからアクセスできるようにすること、アプリケーションのタブ オーダー内で停止します。

タブ オーダーに含まれるコントロールの[IsEnabled](https://docs.microsoft.com/uwp/api/windows.ui.xaml.controls.control#Windows_UI_Xaml_Controls_Control_IsEnabled)にプロパティを設定する必要があります**true**と[IsTabStop](https://docs.microsoft.com/uwp/api/Windows.UI.Xaml.Controls.Control#Windows_UI_Xaml_Controls_Control_IsTabStop)にプロパティを設定する必要があります**true**.

タブ オーダーのコントロールが除外する設定、 [IsTabStop](https://docs.microsoft.com/uwp/api/Windows.UI.Xaml.Controls.Control#Windows_UI_Xaml_Controls_Control_IsTabStop)プロパティを**false**します。

既定では、タブ オーダーには UI 要素が作成される順序が反映されます。 たとえば、`StackPanel` には `Button`、`Checkbox`、`TextBox` が含まれ、タブ オーダーは `Button`、`Checkbox`、`TextBox` です。

既定のタブ オーダーを設定して上書きできます、 [TabIndex](https://docs.microsoft.com/uwp/api/Windows.UI.Xaml.Controls.Control#Windows_UI_Xaml_Controls_Control_TabIndex)プロパティ。

#### <a name="tab-order-should-be-logical-and-predictable"></a>タブ オーダーは、論理的かつ予測可能でなければなりません。

論理的で予測可能なタブ オーダーを使った、適切に設計されたキーボード ナビゲーション モデルがあれば、アプリはより直感的になり、ユーザーは機能をより効率的かつ効果的に探して見つけ、アクセスできるようになります。

すべての対話型コントロールがタブ ストップがある必要があります (である場合を除いて、[グループ](#control-group))、中、ラベルなどの非対話型コントロールにしない必要があります。

フォーカスがアプリケーション内をジャンプするようなカスタムのタブ オーダーは使用しないでください。 たとえば、フォーム内のコントロールの一覧には、上から下および左から右へと移動するタブ オーダーが必要です (ロケールによって異なります)。

参照してください[キーボード アクセシビリティ](../accessibility/keyboard-accessibility.md)タブ ストップをカスタマイズする方法の詳細についてはします。

#### <a name="try-to-coordinate-tab-order-and-visual-order"></a>タブ オーダーと表示順序を調整してみる

タブ オーダーと視覚的な順序 (順序や表示順序を読む場合とも呼ばれます) を調整は、アプリケーションの UI から移動する際にユーザーの混乱を削減に役立ちます。

コマンド、コントロール、コンテンツを順序付けし、最も重要なものをタブ オーダーと表示順序の両方で最初に提示するようにしてください。 ただし実際の表示位置は、親レイアウト コンテナーと、レイアウトに影響する子要素の特定のプロパティに左右されることがあります。 特に、グリッド形式または表形式を使用しているレイアウトでは、表示順序がタブ オーダーとまったく異なる場合があります。

**注:** 表示順序はロケールと言語にも依存します。

### <a name="initial-focus"></a>初期フォーカス

初期フォーカスは、アプリケーションやページが最初に起動またはアクティブ化されたときにフォーカスを受け取る UI 要素を指定します。 キーボードを使用する場合、ユーザーが操作を開始、アプリケーションの UI を使用したこの要素からです。

UWP アプリで初期フォーカスは最高の値を持つ要素に設定されて[TabIndex](https://docs.microsoft.com/uwp/api/Windows.UI.Xaml.Controls.Control#Windows_UI_Xaml_Controls_Control_TabIndex)がフォーカスを受け取ることができます。 コンテナー コントロールの子要素は無視されます。 TIE の場合、表示ツリー内の最初の要素がフォーカスを受け取ります。

#### <a name="set-initial-focus-on-the-most-logical-element"></a>初期フォーカスは、最も論理的な要素に設定します。

初期フォーカスは、ユーザーがアプリを起動したり、ページを移動したりするときに最初に実行する可能性が最も高い操作 (つまり、プライマリ操作) の UI 要素に設定します。 次のような例があります。
-   フォーカスがギャラリー内の最初の項目に設定されているフォト アプリ
-   フォーカスが再生ボタンに設定されているミュージック アプリ

#### <a name="dont-set-initial-focus-on-an-element-that-exposes-a-potentially-negative-or-even-disastrous-outcome"></a>可能性のある負の場合、またはさらに悲惨な結果を公開する要素に初期フォーカスを設定しないでください。

このレベルの機能には、ユーザーの選択必要があります。 重要な結果を生み出す要素に初期フォーカスを設定すると、意図しないデータ消失またはシステム アクセスが生じる可能性があります。 たとえば、しないにフォーカスを設定 delete ボタン電子メールに移動するとします。

参照してください[ナビゲーションを集中](focus-navigation.md)タブ オーダーをオーバーライドする方法についての詳細についてはします。

### <a name="navigation"></a>ナビゲーション

キーボード ナビゲーションは通常、Tab キーと方向キーによってサポートされます。

![Tab + 方向キー](images/keyboard/tab-and-arrow.png)

既定では、UWP コントロールは以下の基本的なキーボード動作に従います。
-   **Tab キー**を使うと、実行可能な/アクティブなコントロール間をタブ オーダーで移動します。
-   **Shift + Tab** キーを使うと、コントロールを逆タブ オーダーで移動します。 ユーザーが方向キーを使ってコントロール内を移動した場合、フォーカスはコントロール内の最後の既知の値に設定されます。
-   **方向キー**を使うと、コントロール固有の "内部ナビゲーション" が表示されます。ユーザーが "内部ナビゲーション" に入ると、方向キーを使ってもコントロール外に移動しません。 次のような例があります。
    -   キーが内でフォーカスを移動/下矢印`ListView`と `MenuFlyout`
    -   現在選択されている値を変更`Slider`と `RatingsControl`
    -   内側にキャレットを移動します。 `TextBox`
    -   内の項目の展開/折りたたみ `TreeView`

これらの既定の動作を使用すると、アプリケーションのキーボード ナビゲーションを最適化できます。

#### <a name="use-inner-navigation-with-sets-of-related-controls"></a>関連するコントロールのセットで ”内部ナビゲーション" を使う

関連するコントロールのセットに矢印キー ナビゲーションを提供するには、アプリケーションの UI の全体的な組織内の関係が促進されます。

たとえば、ここに示す `ContentDialog` コントロールは、横 1 列のボタンに既定で内部ナビゲーションを提供します (カスタム コントロールについては、「[コントロール グループ](#control-group)」をご覧ください)。

![ダイアログの例](images/keyboard/dialog.png)

***関連するボタンのコレクションとの対話が矢印キー ナビゲーションを容易になります***

項目が 1 列に表示されている場合、上/下方向キーによって項目を移動します。 項目が 1 行に表示されている場合、右/左方向キーによって項目を移動します。 項目が複数の列にある場合、4 つの方向キーすべてを使って移動します。

#### <a name="define-a-single-tab-stop-for-a-collection-of-related-controls"></a>関連するコントロールのコレクションの 1 つのタブ ストップを定義します。

関連する、または、補完的なコントロールのコレクションの 1 つのタブ ストップを定義することで、アプリの全体的なタブ ストップの数を最小限に抑えることができます。

たとえば、次の図は縦に並んだ 2 つの `ListView` コントロールを示しています。 左の図は、`ListView` コントロール間を移動するタブ位置で使われる方向キー ナビゲーション を示しているのに対し、右の図は、Tab キーによって親コントロールを移動する必要をなくすことで、子要素間のナビゲーションがどのように簡単かつ効率的になるかを示しています。


<table>
  <td><img src="images/keyboard/arrow-and-tab.png" alt="arrow and tab" /></td>
  <td><img src="images/keyboard/arrow-only.png" alt="arrow only" /></td>
</table>

***2 つの積み上げ ListView コントロールとの対話は、タブ ストップを排除し、方向キーだけを使用した移動によって簡単かつより効率的に作成できます。***

アプリケーション UI に最適化の例を適用する方法については、「[コントロール グループ](#control-group)」をご覧ください。

### <a name="interaction-and-commanding"></a>対話式操作とコマンド実行

コントロールにフォーカスが置かれると、ユーザーはそのコントロールを操作し、特定のキーボード入力を使って関連付けられている機能を呼び出すことができます。

#### <a name="text-entry"></a>テキスト入力

`TextBox` や `RichEditBox` など、特にテキスト入力向けに設計されたコントロールの場合、テキストの入力や移動のためにすべてのキーボード入力が使用され、他のキーボード コマンドより優先されます。 たとえば、`AutoSuggestBox` コントロールのドロップ ダウン メニューは **Space** キーを選択コマンドとして認識しません。

![テキスト入力](images/keyboard/text-entry.png)

#### <a name="space-key"></a>Space キー

テキスト入力モードではない場合、**Space** キーはフォーカスがあるコントロールに関連付けられた操作やコマンドを呼び出します (タッチによるタップやマウスによるクリックと同様)。

![Space キー](images/keyboard/space-key.png)

#### <a name="enter-key"></a>Enter キー

**Enter** キーは、フォーカスのあるコントロールに応じて、さまざまな共通ユーザー操作を実行できます。
-   `Button` や `Hyperlink` などのコマンド コントロールをアクティブ化します。 エンド ユーザーの混乱を避けるため、**Enter** キーは `ToggleButton` や `AppBarToggleButton` など、コマンド コントロールに似たコントロールもアクティブ化します。
-   `ComboBox` や `DatePicker` などのコントロールのピッカー UI を表示します。 **Enter** キーは、ピッカー UI もコミットして閉じます。
-   `ListView`、`GridView`、`ComboBox` などのリスト コントロールをアクティブ化します。
    -   **Enter** キーは、選択操作をリストおよびグリッド項目の **Space** キーとして実行します。ただし、それらの項目に追加の操作が関連付けられている場合を除きます (新しいウィンドウを開くなど)。
    -   コントロールに追加の操作が関連付けられている場合、**Enter** キーは追加の操作を実行し、**Space** キーは選択操作を実行します。

**注:****Enter** キーと **Space** キーは、常に同じ操作を実行するわけではありませんが、多くの場合は同じ操作を実行します。

![Enter キー](images/keyboard/enter-key.png)

Esc キーを使うと、ユーザーが一時的な UI (および、その UI における継続的な操作すべて) を取り消すことができます。

このエクスペリエンスの例は次のとおりです。
-   ユーザーが、選択した値を使って `ComboBox` を開き、方向キーを使ってフォーカスの選択を新しい値に移動します。 Esc キーを押すと `ComboBox` が閉じ、選択した値が元の値にリセットされます。
-   ユーザーがメールの永続的な削除アクションを呼び出すと、操作の確認を求める `ContentDialog` が表示されます。 ユーザーは、これが意図した操作でないと判断し、**Esc** キーを押してダイアログを閉じます。 **Esc** キーは **[キャンセル]** ボタンに関連付けられているため、ダイアログが閉じ、操作は取り消されます。 **Esc** キーは一時的な UI にのみ影響を与えます。アプリの UI を閉じたり、戻ったりすることはありません。

![Esc キー](images/keyboard/esc-key.png)

#### <a name="home-and-end-keys"></a>Home キーと End キー

**Home** キーと **End** キーを使うと、ユーザーは UI 領域の先頭または末尾までスクロールできます。

このエクスペリエンスの例は次のとおりです。
-   `ListView` コントロールと `GridView` コントロールの場合、**Home** キーはフォーカスを最初の要素に移動してビューまでスクロールしますが、**End** キーはフォーカスを最後の要素に移動し、ビューまでスクロールします。
-   `ScrollView` コントロールの場合、**Home** キーは領域の上までスクロールしますが、**End** キーは領域の下までスクロールします (フォーカスが変更されません)。

![Home キーと End キー](images/keyboard/home-and-end.png)

#### <a name="page-up-and-page-down-keys"></a>PageUp キーと PageDown キー

**Page** キーを使うと、ユーザーは一定の単位で UI 領域をスクロールできます。

たとえば、`ListView` コントロールと `GridView` コントロールの場合、**PageUp** キーは領域を 1 "ページ" 分 (通常はビューポートの高さ) 上にスクロールし、領域の上にフォーカスを移動します。 一方、**PageDown** キーは領域を 1 ページ分下に移動し、領域の下にフォーカスを移動します。

![PageUp キーと PageDown キー](images/keyboard/page-up-and-down.png)

### <a name="keyboard-shortcuts"></a>キーボード ショートカット

キーボード ショートカットは、アプリを使いやすくアクセシビリティ サポートの強化し、ユーザーがキーボードの効率の向上の両方を提供することで。

アプリでのキーボード ナビゲーションとアクティブ化をサポートするだけでなくもショートカット、アプリケーションの機能を提供することをお勧めします。 タブ ナビゲーションは、適切な基本的なレベルは、キーボードのサポートが同様のショートカット キーのサポートを追加するより複雑な UI を提供します。 

ショートカットは、ユーザーが効率的にアプリの機能にアクセスできるようにして、生産性を向上させるためのキーの組み合わせです。 ショートカットには次の 2 つの種類があります。
-   [アクセラレータ](#accelerators)は、アプリのコマンドを呼び出すショートカットです。 アプリは、コマンドに対応する特定の UI を提供しない可能性があります。 アクセラレータは通常、Ctrl キーとアルファベット キーで構成されます。
-   [アクセス キー](#access-keys)アプリケーションで特定の UI にフォーカスを設定するためのショートカットを示します。 アクセス キー セレクトは、Alt キーとアルファベット キーで構成されます。

アプリケーション間で同様のタスクをサポートする一貫性のあるキーボード ショートカットを提供して、はるかに便利で強力になります、忘れないようにすることができます。

#### <a name="accelerators"></a>アクセラレータ

アクセラレータは、迅速かつ効率的に、アプリケーションで一般的なアクションを実行するユーザーを支援します。 

アクセラレータの例:
-   キーを押して Ctrl + N キー任意の場所、**メール**アプリが新しいメール アイテムを起動します。
-   Ctrl + E キー Microsoft Edge で任意の場所 (および多くの Microsoft Store アプリケーション) を押して検索を起動します。

アクセラレータには、次の特徴があります。
-   Ctrl キーと関数を使用して主に、キーのシーケンス (Windows システムのショートカット キーも使用 Alt + 英数字以外のキーと、Windows ロゴ キー)。
-   特に使用頻度の高いコマンドにのみ割り当てます。
-   覚えて使うことを意図しており、メニュー、ツールヒント、ヘルプ内にのみ示されています。
-   サポートされている場合は、アプリケーション全体については、全体に影響があります。
-   惜しまは直接記載されていないそのに一貫して割り当てする必要があります。

#### <a name="access-keys"></a>アクセス キー

UWP でアクセス キーをサポートする方法について詳しくは、「[アクセス キー](access-keys.md)」をご覧ください。

アクセス キーを使うと、運動機能に障碍を持つユーザーが、一度に 1 つのキーを押して UI の特定の項目に対してアクションを実行することができます。 さらに、アクセス キーは上級ユーザーが操作をすばやく実行できるように、追加のショートカット キーを伝えるためにも使用できます。

アクセス キーには、次の特徴があります。
-   Alt キーを押しながら英数字キーを押します。
-   主な目的はアクセシビリティです。
-   コントロールの横にある、UI に直接記載されていますがを通じて[キー ヒント](access-keys.md)します。
-   アクセス キーは、対応するメニュー項目やコントロールへの移動に使用します。効力は現在のウィンドウ内に限られます。
-   アクセス キーはよく使用されるコマンド (特にコミット ボタン) を一貫して割り当てる必要があります可能な場合。
-   アクセス キーはローカライズされます。

#### <a name="common-keyboard-shortcuts"></a>一般的なキーボード ショートカット

次の表では、頻繁に使用されるキーボード ショートカットの小さなサンプルを示します。 

| アクション                               | キー コマンド                                      |
|--------------------------------------|--------------------------------------------------|
| すべて選択                           | Ctrl + A                                           |
| 連続して選択                  | Shift + 方向キー                                  |
| Save                                 | Ctrl + S                                           |
| 検索                                 | Ctrl + F                                           |
| 印刷                                | Ctrl + P                                           |
| コピー                                 | Ctrl + C                                           |
| 切り取り                                  | Ctrl + X                                           |
| Paste                                | Ctrl + V                                           |
| 元に戻す                                 | Ctrl + Z                                           |
| 次のタブ                             | Ctrl + Tab                                         |
| タブを閉じる                            | Ctrl + 4 または Ctrl + W                                |
| セマンティック ズーム                        | Ctrl + 正符号 (+) または Ctrl + マイナス記号 (-)                                 |

Windows システムのショートカットの包括的な一覧は、次を参照してください。 [Windows 用のキーボード ショートカット](https://support.microsoft.com/help/12445/windows-keyboard-shortcuts)します。 一般的なアプリケーション ショートカットでは、次を参照してください。 [Microsoft アプリケーション用のキーボード ショートカット](https://support.microsoft.com/help/13805/windows-keyboard-shortcuts-in-apps)します。

## <a name="advanced-experiences"></a>高度なエクスペリエンス

このセクションでは、UWP アプリによりサポートされているより複雑なキーボード操作エクスペリエンスと、アプリをさまざまなデバイスやツールで使う場合に認識すべき動作についていくつか説明します。

### <a name="control-group"></a>コントロール グループ

一連の関連する (または補完的な) コントロールを "コントロール グループ" (または方向領域) にまとめることで、方向キーを使った "内部ナビゲーション" が可能になります。 コントロール グループは、1 つのタブ位置にすることも、コントロール グループ内の複数のタブ位置を指定することもできます。

#### <a name="arrow-key-navigation"></a>方向キー ナビゲーション

ユーザーは、UI 領域に似たような関連するコントロールのグループがあるとき、方向キー ナビゲーションがサポートされることを期待します。
-   `AppBarButtons` で、 `CommandBar`
-   `ListItems` または`GridItems`内`ListView`または `GridView`
-   `Buttons` 中に `ContentDialog`

UWP コントロールは、方向キー ナビゲーションを既定でサポートします。 カスタム レイアウトおよびコントロール グループでは、`XYFocusKeyboardNavigation="Enabled"` を使って同様の動作を提供します。

次のコントロールを使用する場合、方向キーによる移動のサポートを追加することを検討してください。

<table>
  <tr>
    <td>
      <p><img src="images/keyboard/dialog.png" alt="Dialog buttons"/></p>
      <p><sup>ダイアログのボタン</sup></p>
      <p><img src="images/keyboard/radiobutton.png" alt="Radio buttons"/></p>
      <p><sup>オプション ボタン</sup></p>     
    </td>
    <td>
      <p><img src="images/keyboard/appbar.png" alt="AppBar buttons"/></p>
      <p><sup>AppBarButtons</sup></p>
      <p><img src="images/keyboard/list-and-grid-items.png" alt="List and Grid items"/></p>
      <p><sup>リスト項目および GridItems</sup></p>
    </td>    
  </tr>
</table>

#### <a name="tab-stops"></a>タブ位置

によって、アプリケーションの機能とレイアウト、コントロールのグループに最適なナビゲーション オプションに矢印ナビゲーションを子要素、複数のタブ ストップまたはいくつかの組み合わせを使用した 1 つのタブ ストップ可能性があります。

##### <a name="use-multiple-tab-stops-and-arrow-keys-for-buttons"></a>ボタンに複数のタブ位置と方向キーを使う

アクセシビリティ ユーザーは、通常はボタンのコレクションの移動に方向キーを使わない、実績のあるキーボード ナビゲーション ルールに依存しています。 ただし、視覚に障碍のないユーザーは、動作が自然であると感じる可能性があります。

この場合、既定の UWP の動作の例は `ContentDialog` です。 方向キーはボタン間の移動に使うことができますが、各ボタンはタブ位置でもあります。

##### <a name="assign-single-tab-stop-to-familiar-ui-patterns"></a>使い慣れた UI パターンに 1 つのタブ位置を割り当てる

レイアウトがコントロール グループのよく知られている UI パターンに従っている場合、グループに 1 つのタブ位置を割り当てるとユーザーのナビゲーション効率を向上することがあります。

たとえば、次のものがあります。
-   `RadioButtons`
-   複数`ListViews`のようになり、1 つのように動作します。 `ListView`
-   タイルのグリッドと外観や動作が似ている UI (スタート メニューのタイルなど)

#### <a name="specifying-control-group-behavior"></a>コントロール グループの動作を指定する

カスタム コントロール グループの動作は、以下の API を使ってサポートします (すべてこのトピックの後半で詳しく説明します)。

-   [XYFocusKeyboardNavigation](focus-navigation.md#2d-directional-navigation-for-keyboard) は、コントロール間での方向キー ナビゲーションを可能にします。
-   [TabFocusNavigation](focus-navigation.md#tab-navigation) は、タブ位置が複数か 1 つかを示します。
-   [FindFirstFocusableElement and FindLastFocusableElement](focus-navigation-programmatic.md#find-the-first-and-last-focusable-element) は、フォーカスを **Home** キーによって最初の項目に、**End** キーによって最後の項目に設定します。

次の図は、関連付けれらたラジオ ボタンのコントロール グループにおける直感的なキーボード ナビゲーションの動作を示しています。 この場合、コントロール グループの 1 つのタブ位置、方向キーを使ったラジオ ボタン間の内部ナビゲーション、最初のラジオ ボタンにバインドされた **Home** キー、最後のラジオ ボタンにバインドされた **End** キーをお勧めします。

![組み立てる](images/keyboard/putting-it-all-together.png)

### <a name="keyboard-and-narrator"></a>キーボードとナレーター

ナレーターは、キーボード ユーザーを対象に用意された UI アクセシビリティ ツールです (他の入力の種類もサポートされます)。 ただし、ナレーター機能は UWP アプリによりサポートされているキーボード操作を上回るため、ナレーター用に UWP アプリを設計するときは特別な注意が必要です  (ナレーターのユーザー エクスペリエンスについては、「[ナレーターの基本について](https://support.microsoft.com/help/22808/windows-10-narrator-learning-basics)」をご覧ください)。

UWP のキーボードの動作とナレーターによりサポートされている動作の違いには、以下のようなものがあります。
-   標準的なキーボード ナビゲーションでは表示されない UI 要素にナビゲーションするための追加のキーの組み合わせ (CapsLock + 方向キーを使ってコントロール ラベルを読み上げるなど)。
-   無効な項目へのナビゲーション。 既定では、無効な項目は標準的なキーボード ナビゲーションによって表示されません。
    -   UI の細かさに基づいてすばやくナビゲーションするための コントロール "ビュー"。 ユーザーは、項目、文字、単語、行、段落、リンク、見出し、表、ランドマーク、および候補に移動できます。 標準的なキーボード ナビゲーションでは、これらのオブジェクトが階層のないリストとして表示されるため、ショートカット キーがないとナビゲーションしにくくなる可能性があります。

#### <a name="case-study--autosuggestbox-control"></a>ケース スタディ – AutoSuggestBox コントロール

`AutoSuggestBox` の検索ボタンでは、ユーザーが **Enter** キーを押して検索クエリを送信できるため、Tab および方向キーを使って標準的なキーボード ナビゲーションにアクセスすることができません。 ただし、ユーザーが CapsLock + 方向キーを押すとナレーターを通じてアクセスできます。

![自動提案のキーボード フォーカス](images/keyboard/auto-suggest-keyboard.png)

*キーボードとユーザー キーを押して、* ***Enter*** *検索クエリを送信するキー*

<table>
  <tr>
    <td>
      <p><img src="images/keyboard/auto-suggest-narrator-1.png" alt="autosuggest narrator focus"/></p>
      <p><em>ナレーターとユーザー キーを押して、 <strong>Enter</strong>検索クエリを送信するキー</em></p>
    </td>
    <td>
      <p><img src="images/keyboard/auto-suggest-narrator-2.png" alt="autosuggest narrator focus on search"/></p>
      <p><em>ナレーターでのユーザーは、検索ボタンを使用してアクセスすることも、 <strong>Caps Lock + 右方向キー</strong>、キーを押して<strong>領域</strong>キー</em></p>
    </td>
  </tr>
</table>

### <a name="keyboard-and-the-xbox-gamepad-and-remote-control"></a>キーボードと Xbox ゲームパッドおよびリモコン

Xbox のゲームパッドとリモコンは、UWP の多くのキーボード動作とエクスペリエンスをサポートします。 ただし、キーボードで使用可能なさまざまなキー オプションが不足しているため、ゲームパッドとリモコンに多くのキーボード最適化がありません (リモコンはゲームパッドよりもさらに制限されます)。

参照してください[ゲームパッドとリモート制御の相互作用](gamepad-and-remote-interactions.md)ゲームパッドとリモコン入力の UWP サポートの詳細についてはします。

キーボード、ゲームパッド、リモコンにおける対応するキーの例を以下に示します。

| **キーボード**  | **Gamepad**                         | **リモート_コントロール**  |
|---------------|-------------------------------------|---------------------|
| Space         | A ボタン                            | [選択] ボタン       |
| 以下に         | A ボタン                            | [選択] ボタン       |
| Esc キー        | B ボタン                            | [戻る] ボタン         |
| Home/End      | なし                                 | なし                 |
| PageUp/PageDown  | 縦スクロールはトリガー ボタン、横スクロールはバンパー ボタン   | なし                 |

ゲームパッドとリモコンを使う UWP アプリを設計する際に注意すべきいくつかキーの相違点は次のとおりです。
-   テキストを入力するには、ユーザーは A を押してテキスト コントロールをアクティブ化する必要があります。
-   フォーカス ナビゲーションは、コントロール グループに限定されるわけではありません。ユーザーは、アプリ内のフォーカス可能な任意の UI 要素に自由に移動できます。

    **NOTE** フォーカスは、キーを押した方向にあるフォーカス可能な任意の UI 要素に移動できます。ただし、その要素がオーバーレイ UI にある場合や、[フォーカス エンゲージメント](gamepad-and-remote-interactions.md#focus-engagement)が指定されている場合 (A ボタンによってエンゲージ/エンゲージ解除されるまでフォーカスが領域に入ったり出たりすることができないため) を除きます。 詳しくは、「[方向ナビゲーション](#directional-navigation)」をご覧ください。
-   コントロール間、および内部ナビゲーション用にフォーカスを移動するには、方向パッドと左スティックのボタンが使用されます。

    **注** ゲームパッドとリモコンは、方向キーが押されたとき、同じ表示順序内にある項目のみ移動します。 フォーカスを受け取ることができる後続の要素がない場合、その方向のナビゲーションは無効になります。 状況によっては、キーボード ユーザーは必ずしもそのような制約を持っているわけではありません。 詳しくは、「[組み込みキーボードの最適化](#built-in-keyboard-optimization)」をご覧ください。

#### <a name="directional-navigation"></a>方向ナビゲーション

方向ナビゲーションは、UWP [Focus Manager](https://docs.microsoft.com/uwp/api/Windows.UI.Xaml.Input.FocusManager) ヘルパー クラスにより管理されます。このヘルパー クラスは、方向キーが押されたことを認識し (方向キー、方向パッド)、対応する視覚的な向きにフォーカスを移動しようとします。

キーボードでのアプリを選んだときとは異なり[マウス モード](gamepad-and-remote-interactions.md#mouse-mode)ゲームパッド、リモート制御のアプリケーション全体で方向ナビゲーションが適用されます。 参照してください[ゲームパッドとリモート制御の相互作用](gamepad-and-remote-interactions.md)方向ナビゲーションの最適化の詳細についてはします。

**注**キーボードの Tab キーを使ったナビゲーションは、方向ナビゲーションとは見なされません。 詳しくは、「[タブ位置](#tab-stops)」をご覧ください。

<table>
  <tr>
    <td>
      <p><img src="images/keyboard/directional-navigation.png" alt="directional navigation"/></p>
      <p><em><strong>方向ナビゲーションがサポートされています</strong></br>(キーボードの矢印、ゲームパッド、リモート_コントロール パッド) の方向キーを使用して、ユーザーがさまざまなコントロール間で移動できます。</em></p>
    </td>
    <td>
      <p><img src="images/keyboard/no-directional-navigation.png" alt="no directional navigation"/></p>
      <p><em><strong>方向ナビゲーションがサポートされていません</strong> </br>ユーザーは、方向キーを使ってコントロール間を移動することはできません。 (Tab キー) のコントロール間を移動するには、他のメソッドは影響ありません。</em></p>
    </td>
  </tr>
</table>

### <a name="built-in-keyboard-optimization"></a>キーボードの最適化に組み込まれています

使用されているレイアウトとコントロールによっては、特にキーボード入力に合わせて UWP アプリを最適化できます。

次の例は、1 つのタブ位置に割り当てられているリスト項目、グリッド項目、メニュー項目のグループを示しています (「[タブ位置](#tab-stops)」をご覧ください)。 グループにフォーカスがある場合、方向キーによって、対応する表示順序で内部ナビゲーションが実行されます (「[ナビゲーション」](#navigation)」をご覧ください)。

![単一列の方向キー ナビゲーション](images/keyboard/single-column-arrow.png)

***矢印キー ナビゲーションを 1 つの列***

![単一行の方向キー ナビゲーション](images/keyboard/single-row-arrow.png)

***1 つの行方向キーによる移動***

![複数列および行の方向キー ナビゲーション](images/keyboard/multiple-column-and-row-navigation.png)

***複数の列や行の矢印キー ナビゲーション***

#### <a name="wrapping-homogeneous-list-and-grid-view-items"></a>同種のリスト項目およびグリッド ビュー項目の折り返し

List 項目と GridView 項目の複数の行と列を移動する場合、必ずしも方向ナビゲーションが最も効率的な方法とは限りません。

**注** メニュー項目は通常単一列のリストですが、場合によっては特別なフォーカス ルールが適用されることがあります (「[ポップアップ UI](#popup-ui)」をご覧ください)。

リスト オブジェクトとグリッド オブジェクトは複数の行と列を使って作成されることがあります。 このようなオブジェクトには通常、行優先順序 (まず項目が行全体に入力されてから、次の行に入力される) または列優先順序 (まず項目が列全体に入力されてから次の列に入力される) が適用されます。 行または列優先順序は、スクロールの方向によって決まり、項目の順序がこの方向と競合しないようにする必要があります。

行優先順序 (項目が左から右、上から下に入力される) では、フォーカスが行内の最後の項目に置かれて右方向キーが押されると、フォーカスは次の行の最初の項目に移動します。 これと同じ動作が逆の順序で発生します。行の最初の項目にフォーカスが設定し、左方向キーを押すと、フォーカスは移動最後の項目の前の行でします。

列優先順序 (項目が上から下、左から右に入力される) では、フォーカスが列内の最後に項目に置かれて、ユーザーが下方向キーを押すと、フフォーカスが次の列の最初の項目に移動します。 これと同じ動作が逆の順序で発生します。列の最初の項目にフォーカスが設定し、上向きの矢印キーを押すと、フォーカスは移動最後の項目、前回のコラムでします。

<table>
  <tr>
    <td>
      <p><img src="images/keyboard/row-major-keyboard.png" alt="row major keyboard navigation"/></p>
      <p><em>行の主なキーボード ナビゲーション</em></p>
    </td>
    <td>
      <p><img src="images/keyboard/column-major-keyboard.png" alt="column major keyboard navigation"/></p>
      <p><em>列の主なキーボード ナビゲーション</em></p>
    </td>
  </tr>
</table>

#### <a name="popup-ui"></a>ポップアップ UI

前述のように、方向ナビゲーションは、アプリケーションの UI コントロールの視覚的な順序に対応することを確認しようとする必要があります。

ContextMenu、AppBarOverflowMenu、AutoSuggest などのいくつかのコントロールには、場所と (可能な画面領域に基づく) プライマリ コントロールに対する相対的な方向に表示されるメニュー ポップアップが含まれます。 たとえば、メニューが下方向 (既定の方向) に開くのに十分な領域がない場合は、上方向に開きます。 メニューが毎回同じ方向に表示されるという保証はありません。

<table>
  <td><img src="images/keyboard/command-bar-open-down.png" alt="command bar opens down with down arrow key" /></td>
  <td><img src="images/keyboard/command-bar-open-up.png" alt="command bar opens up with down arrow key" /></td>
</table>

これらのコントロールでは、メニューが最初に開かれたとき (ユーザーによって項目が選択されていない状態)、下方向キーは常に最初の項目にフォーカスを設定し、上方向キーは常にフォーカスをメニューの最後の項目に設定します。 同様に、最後の項目が選択されて下方向キーが押されると、フォーカスはメニューの最初の項目に移動し、最初の項目が選択されて上方向キーが押されると、フォーカスはメニューの最後の項目に移動します。

これと同じ動作をカスタム コントロールでエミュレートしてみてください。 この動作を実装する方法のコード サンプルが記載[プログラムによるフォーカスのナビゲーション](focus-navigation-programmatic.md#find-the-first-and-last-focusable-element)ドキュメント。

## <a name="test-your-app"></a>アプリのテスト

サポートされているすべての入力デバイスを使ってアプリをテストし、UI 要素が一貫した直感的な方法で移動できることと、要素と目的のタブ位置の予期しない干渉がないことを確認してください。

## <a name="related-articles"></a>関連記事
* [キーボード イベント](keyboard-events.md)
* [入力デバイスの識別](identify-input-devices.md)
* [タッチ キーボードの存在に応答します。](respond-to-the-presence-of-the-touch-keyboard.md)
* [フォーカスの視覚効果のサンプル](https://go.microsoft.com/fwlink/p/?LinkID=619895)

## <a name="appendix"></a>付録

### <a name="software-keyboard"></a>ソフトウェアのキーボード

ソフトウェア キーボードは、物理的なキーボードの代わりにユーザーが使うことができる画面上のキーボードです。タッチ、マウス、ペン/スタイラス、またはその他のポインティング デバイスを通じてデータを入力します (タッチ スクリーンは必須ではありません)。 タッチ画面では、これらのキーボードを直接タッチしてテキストを入力することもできます。 Xbox One デバイスでは、ゲームパッドやリモコンを使ってフォーカス表示を移動したりショートカット キーを使ったりすることで、個々のキーを選択する必要があります。

![Windows 10 のタッチ キーボード](images/keyboard/default.png)

***Windows 10 タッチ キーボード***

![Xbox One のスクリーン キーボード](images/keyboard/xbox-onscreen-keyboard.png)

***Xbox One スクリーン キーボード***

デバイスに応じて、ソフトウェア キーボードは、テキスト フィールドやその他の編集可能なテキスト コントロールがフォーカスを取得したとき、またはユーザーが**通知センター**で手動でタッチ キーボードを有効にしたときに表示されます。

![通知センターでのタッチ キーボードのアイコン](images/keyboard/touch-keyboard-notificationcenter.png)

テキスト入力コントロールへのフォーカスをプログラムで設定するアプリの場合、タッチ キーボードは呼び出されません。 これにより、ユーザーの直接的な操作による予期しない動作を回避できます。 ただし、プログラムによってキーボードがテキスト入力コントロール以外に移動されると、キーボードが自動的に非表示になります。

通常、ユーザーがフォームでコントロール間を移動している間は、タッチ キーボードは表示されたままです。 この動作は、フォーム内の他のコントロールの種類に基づいて異なります。

タッチ キーボードを使用するテキスト入力セッション中に、キーボードを閉じずにフォーカスを受け取ることができる非編集コントロールの一覧を次に示します。 ユーザーがこれらのコントロールとタッチ キーボードによるテキスト入力との間で何度も行き来することが考えられるため、UI の表示を不必要に切り替えてユーザーを混乱させることのないよう、タッチ キーボードは表示されたままになります。

-   チェック ボックス
-   コンボ ボックス
-   ラジオ ボタン
-   スクロール バー
-   ツリー
-   ツリー項目
-   Menu
-   メニュー バー
-   メニュー項目
-   ツール バー
-   一覧
-   一覧項目

次に、タッチ キーボードのさまざまなモードの例を示します。 最初の画像は既定のレイアウトであり、2 つ目の画像は親指レイアウトです (一部の言語では利用できません)。

![既定のレイアウト モードのタッチ キーボード](images/keyboard/default.png)

***既定のキーボード、タッチのレイアウト モード***

![拡張レイアウト モードのタッチ キーボード](images/keyboard/extendedview.png)

***展開されたレイアウト モードでタッチ キーボード***

キーボード操作に成功すると、ユーザーはキーボードのみを使って基本のアプリ シナリオを実行できます。つまり、ユーザーはすべての対話型要素にアクセスし、既定の機能をアクティブにすることができます。 成功の度合いには、キーボード ナビゲーション、アクセシビリティ対応のアクセス キー、上級ユーザー用のアクセラレータ (ショートカット) キーなど、さまざまな要因が影響します。

**注**  タッチ キーボードが切り替えとシステムのほとんどのコマンドをサポートしていません。

#### <a name="on-screen-keyboard"></a>スクリーン キーボード
ソフトウェア キーボードと同様、スクリーン キーボードは、物理的なキーボードの代わりに使うことができる視覚的なソフトウェア キーボードです。タッチ、マウス、ペン/スタイラス、またはその他のポインティング デバイスを通じてデータを入力します (タッチ スクリーンは必須ではありません)。 スクリーン キーボードは、物理的なキーボードが存在しないシステムや、運動障碍により一般的な物理入力デバイスを使うことができないユーザーのために用意されています。 スクリーン キーボードは、ハードウェア キーボードの機能のすべて、または少なくともほとんどをエミュレートします。

スクリーン キーボードは、[設定] &gt; [簡単操作] の [キーボード] ページから有効にすることができます。

**注** スクリーン キーボードの方がタッチ キーボードより優先され、スクリーン キーボードが表示されている場合はタッチ キーボードは表示されません。

![スクリーン キーボード](images/keyboard/osk.png)

***スクリーン キーボード***

スクリーン キーボードについて詳しくは、[スクリーン キーボードに関するページ](https://support.microsoft.com/help/10762/windows-use-on-screen-keyboard)をご覧ください。

## <a name="related-articles"></a>関連記事

- [キーボードのアクセシビリティ](../accessibility/keyboard-accessibility.md)
