---
title: 補足のプロパティを使用します。
description: Windows で実装された方法で補足のプロパティと詳細の使用の概要
ms.date: 01/10/2017
ms.topic: article
keywords: windows 10、uwp、WinRT API では、インデクサー、検索
localizationpriority: medium
ms.openlocfilehash: b2ac43c9aa2d27f8745e9075abc13d8feaba2370
ms.sourcegitcommit: b034650b684a767274d5d88746faeea373c8e34f
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/06/2019
ms.locfileid: "57592687"
---
# <a name="using-supplemental-properties"></a><span data-ttu-id="64781-104">補足のプロパティを使用します。</span><span class="sxs-lookup"><span data-stu-id="64781-104">Using supplemental properties</span></span>  

## <a name="summary"></a><span data-ttu-id="64781-105">概要</span><span class="sxs-lookup"><span data-stu-id="64781-105">Summary</span></span>  
- <span data-ttu-id="64781-106">補足のプロパティは、ファイルを変更することがなくプロパティを持つタグ ファイルにアプリを許可します。</span><span class="sxs-lookup"><span data-stu-id="64781-106">Supplemental properties allow apps to tag files with properties without changing the file</span></span> 
- <span data-ttu-id="64781-107">を計算することは困難プロパティがある場合またはファイルを変更できないに役立ちます。</span><span class="sxs-lookup"><span data-stu-id="64781-107">Useful for cases where you have properties that are hard to calculate, or the file can’t be modified</span></span> 
- <span data-ttu-id="64781-108">他のプロパティ システムを使用して、Windows のプロパティと同じ補足プロパティを使用して</span><span class="sxs-lookup"><span data-stu-id="64781-108">Using supplemental properties is the same as using any other property on the Windows Property system</span></span>  

## <a name="introduction"></a><span data-ttu-id="64781-109">概要</span><span class="sxs-lookup"><span data-stu-id="64781-109">Introduction</span></span> 
<span data-ttu-id="64781-110">過去数年で魅力的な新しいアプリの多くは、作成された日付などの基本的な事項を超えるファイルから便利なプロパティを抽出するユーザー ファイルの CPU 集約型の操作を実行している必要があります。</span><span class="sxs-lookup"><span data-stu-id="64781-110">Many of the exciting new apps in the last few years require running CPU intensive operations on user files to extract useful properties from the files beyond basic things like date created.</span></span> <span data-ttu-id="64781-111">これらのアプリは、画像、メールやテキスト分析でグループのドキュメントをインテントの抽出内の認識をまとめてオブジェクトの操作を行います。</span><span class="sxs-lookup"><span data-stu-id="64781-111">These apps do object recognition in images, intent extraction in emails, and text analysis to group documents together.</span></span> <span data-ttu-id="64781-112">これは、方法で駆動強力なコンピューティング向けのほとんどの Pc で公開されています。</span><span class="sxs-lookup"><span data-stu-id="64781-112">This is being driven by how powerful computing is now available on most consumer PCs.</span></span>   

<span data-ttu-id="64781-113">すぐに検索可能にするには、このメタデータに使用できるユーザー指数関数的により生産性を向上します。</span><span class="sxs-lookup"><span data-stu-id="64781-113">Making this metadata searchable instantly allows for users to be exponentially more productive.</span></span> <span data-ttu-id="64781-114">興味深いは、単に、娘が、画像を知ることが、彼女の祖母の彼女の作品の画像を検索できるははるかに多くに便利です。</span><span class="sxs-lookup"><span data-stu-id="64781-114">Simply knowing your daughter is in a picture is interesting but being able to search for the picture of her with her grandmother is so much more useful.</span></span> <span data-ttu-id="64781-115">コンピューターのフィールより個人とより alive のエクスペリエンスになります。</span><span class="sxs-lookup"><span data-stu-id="64781-115">It makes the experience of using a computer feel more personal, and more alive.</span></span> <span data-ttu-id="64781-116">ユーザーがコンピューターでに問い合わせる、大切なを見つけるのに役立ちます。</span><span class="sxs-lookup"><span data-stu-id="64781-116">Like someone in the machine is reaching out to help you find your treasured memories.</span></span> 

<span data-ttu-id="64781-117">数十年間、Windows 上の高速検索のソリューションが、インデクサーをされているし、Creators Update で更新が行われてこれらの新しいシナリオをサポートするためにします。</span><span class="sxs-lookup"><span data-stu-id="64781-117">For decades, the solution for fast searching on Windows has been the indexer, and in the Creators Update it has been updated to support these new scenarios.</span></span> <span data-ttu-id="64781-118">アプリでは、タグのファイル システムで抽出するもの以外の追加のプロパティでできますようになりました。</span><span class="sxs-lookup"><span data-stu-id="64781-118">Apps are now able to tag files with additional properties beyond those which are extracted by the system.</span></span> <span data-ttu-id="64781-119">これらのプロパティは、ファースト クラスの市民として扱われます。</span><span class="sxs-lookup"><span data-stu-id="64781-119">These properties are treated as first class citizens</span></span>  

## <a name="windows-properties"></a><span data-ttu-id="64781-120">Windows プロパティ</span><span class="sxs-lookup"><span data-stu-id="64781-120">Windows Properties</span></span> 
<span data-ttu-id="64781-121">[Windows プロパティ システム](https://msdn.microsoft.com/library/windows/desktop/ff728898)年間のファイルとの対話のキーの一部となっています。</span><span class="sxs-lookup"><span data-stu-id="64781-121">The [Windows Property system](https://msdn.microsoft.com/library/windows/desktop/ff728898) has been a key part of interacting with files for years.</span></span> <span data-ttu-id="64781-122">これにより、アプリのすべての異なるファイル形式や言語にファイルを表示できる内部構造を知らなくても、ファイルからプロパティを読み取るができます。</span><span class="sxs-lookup"><span data-stu-id="64781-122">It allows apps to read properties from files without having to understand the internals of all the different file formats or languages a file could be in.</span></span> <span data-ttu-id="64781-123">すべてが抽象化することが開発者として、行う必要があるものはリストの要求し、昇順または降順を指定します。</span><span class="sxs-lookup"><span data-stu-id="64781-123">All that is abstracted away for you as a developer, all you have to do is ask for a list and specify ascending or descending.</span></span>  

<span data-ttu-id="64781-124">プロパティ システムが Windows のインデクサーと絡まり合って – そのスコープ内のファイルからすべてのプロパティを読み取りに格納します。</span><span class="sxs-lookup"><span data-stu-id="64781-124">The property system is intertwined with the Windows Indexer – it reads all the properties from files within its scope and stores them.</span></span> <span data-ttu-id="64781-125">後でときにアプリが要求を変更するには、日付で並べ替えられるフォルダー内のすべての .docx の一覧については、インデクサー John Smith が作成したものを除いてできる一覧を返します。 すぐにします。</span><span class="sxs-lookup"><span data-stu-id="64781-125">Later when an app asks for a list of all the .docx in a folder to be sorted by date modified, excluding those authored by John Smith the indexer can return the list instantly.</span></span>  

<span data-ttu-id="64781-126">システムの処理の欠点は、すべてのプロパティを必要とするためのインデクサーには保存すぐに使用できるファイルに関するです。</span><span class="sxs-lookup"><span data-stu-id="64781-126">The downside to how these systems work together is that the indexer used to require all the properties it would store about a file to be available instantly.</span></span> <span data-ttu-id="64781-127">これをハードの時間の要件であるためにの計算に長い時間がかかる重要なプロパティについて理解しておくことを制限します。</span><span class="sxs-lookup"><span data-stu-id="64781-127">This limited it from knowing about more interesting properties that take longer to calculate since there is a hard time requirement.</span></span>  

<span data-ttu-id="64781-128">簡単にプロパティを使用して、アプリは、データベースの操作と同様に、ファイルのプロパティの並べ替えられたセットを依頼するか、または検索エンジンを使用するようにクエリを渡すことができます。</span><span class="sxs-lookup"><span data-stu-id="64781-128">Using properties though is easy, the app can either request a sorted set of properties about a file, much like working with a database, or it can pass a query like using a search engine.</span></span> <span data-ttu-id="64781-129">インデクサーは、クエリを処理し、結果を返します。</span><span class="sxs-lookup"><span data-stu-id="64781-129">The indexer will process the query and return the results.</span></span> <span data-ttu-id="64781-130">これを開発者に提供 (たとえば検索 jpg ファイルのみ)、フィルターを結合する柔軟性、ユーザーのクエリ (ファイル名が「鳥」で始まる) を使用します。</span><span class="sxs-lookup"><span data-stu-id="64781-130">This give developers the flexibility to combine their filters (for example only search jpg files) with the user’s query (file name starting with “bird”).</span></span> 

## <a name="supplemental-properties"></a><span data-ttu-id="64781-131">補足のプロパティ</span><span class="sxs-lookup"><span data-stu-id="64781-131">Supplemental properties</span></span> 

<span data-ttu-id="64781-132">補足のプロパティと同様に動作正規の Windows プロパティ 1 つの非常に重要な違い: インデクサーにファイルが追加されたときに書き込まれるは行いません。</span><span class="sxs-lookup"><span data-stu-id="64781-132">Supplemental properties behave identically to regular Windows properties with one very important difference – they are not going to be written when the file is added to the indexer.</span></span> <span data-ttu-id="64781-133">補足のプロパティは、後で、システム上の別のアプリを追加する必要があります。</span><span class="sxs-lookup"><span data-stu-id="64781-133">A supplemental property must be added by another app on the system later.</span></span> <span data-ttu-id="64781-134">これは、2 分後からオブジェクトの認識が完了または日後にある可能性があります。</span><span class="sxs-lookup"><span data-stu-id="64781-134">It could be two minutes later once object recognition completes or it could be days later.</span></span> 

<span data-ttu-id="64781-135">プロパティが書き込まれた後検索、フィルター処理、並べ替え、またはそのシステムの他のプロパティと同じようにグループ化します。</span><span class="sxs-lookup"><span data-stu-id="64781-135">Once the property is written it can be searched, filtered, sorted, or grouped just like any other property on the system.</span></span> <span data-ttu-id="64781-136">使用できますで結合されたクエリ、システム上の他のプロパティを持つか、補足かどうか。</span><span class="sxs-lookup"><span data-stu-id="64781-136">As well it can be used in combined queries with other properties on the system, either supplemental or not.</span></span> <span data-ttu-id="64781-137">これは、再書き込みを行うことがなく、既存のファイル システム コードを簡単に補足プロパティを結合する柔軟性を提供します。</span><span class="sxs-lookup"><span data-stu-id="64781-137">This give you the flexibility to combine supplemental properties easily with your existing file system code without having to do a rewrite.</span></span>  

### <a name="example-scenarios"></a><span data-ttu-id="64781-138">シナリオ例</span><span class="sxs-lookup"><span data-stu-id="64781-138">Example scenarios</span></span> 

<span data-ttu-id="64781-139">何千もの補足のプロパティの書き込みがさまざまなプロパティがありますが、このチュートリアルに戻ると保持する主要なシナリオのいくつかあります。</span><span class="sxs-lookup"><span data-stu-id="64781-139">There are thousands of different properties you could write to a supplemental property, but there are a couple of key scenarios that this tutorial will keep going back to:</span></span>  

#### <a name="tagging-pictures-with-extracted-properties"></a><span data-ttu-id="64781-140">抽出されたプロパティで画像をタグ付け</span><span class="sxs-lookup"><span data-stu-id="64781-140">Tagging pictures with extracted properties</span></span> 
<span data-ttu-id="64781-141">これらのアプリは、イメージ内のオブジェクトなど、システムが把握するイメージからの特徴の抽出を ML トレーニング済みモデルを使用できます。</span><span class="sxs-lookup"><span data-stu-id="64781-141">These apps can use an ML trained model to extract features from an image that the system doesn’t know about such as object in the image.</span></span> <span data-ttu-id="64781-142">イメージの特定のオブジェクトを取得し、および後で、検索やグループ化のため、プロパティ システムに追加できます。</span><span class="sxs-lookup"><span data-stu-id="64781-142">It can then take the objects it identifies in the image and add them to the property system for later searching or grouping.</span></span>  

#### <a name="tagging-files-with-an-app-specific-id"></a><span data-ttu-id="64781-143">アプリ固有の ID を持つファイルをタグ付け</span><span class="sxs-lookup"><span data-stu-id="64781-143">Tagging files with an app specific ID</span></span> 
<span data-ttu-id="64781-144">多くのアプリのファイル同期では、サーバーとクライアントのさまざまなデバイスの間で移動するために、ファイルを追跡するために、独自の一意の ID を使用します。</span><span class="sxs-lookup"><span data-stu-id="64781-144">Many file sync apps use their own unique ID to track files as they move between the server and various client devices.</span></span> <span data-ttu-id="64781-145">同期クライアントは、ファイルの影響を与えずに、プロパティ システムにこの ID を記述できます。</span><span class="sxs-lookup"><span data-stu-id="64781-145">The sync client can write this ID to the property system without effecting the file.</span></span> <span data-ttu-id="64781-146">この ID は、高速アクセスを後でアプリに対して使用できると他のアプリ、システム同期プロバイダーと通信するときの読み取りに使用できるようになりました。</span><span class="sxs-lookup"><span data-stu-id="64781-146">This ID is now available to the app later for fast access and available for any other app on the system to read when communicating with the sync provider.</span></span> 

<span data-ttu-id="64781-147">補足のプロパティを使用するための他の多くのオプションがありますが、これらの両方の高速検索や検索に必要なため、良い例のように、情報システムが認識できないし、ファイル自体に追加できません。</span><span class="sxs-lookup"><span data-stu-id="64781-147">There are many other options for using supplemental properties but both of these make good examples because they require fast lookup or search, are pieces of information the system doesn’t know about, and can’t be added to the file itself.</span></span>  

### <a name="using-supplemental-properties"></a><span data-ttu-id="64781-148">補足のプロパティを使用します。</span><span class="sxs-lookup"><span data-stu-id="64781-148">Using supplemental properties</span></span> 
<span data-ttu-id="64781-149">補足プロパティを使用すると、ファイル システムへの通常のプロパティの書き込みと同じです。</span><span class="sxs-lookup"><span data-stu-id="64781-149">Using the supplemental properties is the same as writing a normal property to the file system.</span></span> <span data-ttu-id="64781-150">StorageFiles とプロパティの使用を選んだ場合は、これを省略できます。</span><span class="sxs-lookup"><span data-stu-id="64781-150">If you are comfortable with using StorageFiles and properties, you can skip over this.</span></span> <span data-ttu-id="64781-151">それ以外の場合、1 つのプロパティをファイルに書き出しと同じプロパティを戻すを後で読み取りの簡単なサンプルを見てみましょう。</span><span class="sxs-lookup"><span data-stu-id="64781-151">Otherwise, let’s walk through a quick sample of writing out a single property to a file and then reading the same property back later.</span></span>  

### <a name="writing-supplemental-properties"></a><span data-ttu-id="64781-152">補足のプロパティの書き込み</span><span class="sxs-lookup"><span data-stu-id="64781-152">Writing supplemental properties</span></span>  
<span data-ttu-id="64781-153">サンプルは、わかりやすくするために、検出された最初のファイルのみ変更が、アプリが検出されたすべてのファイルにプロパティを追加は一般にします。</span><span class="sxs-lookup"><span data-stu-id="64781-153">The sample will only modify the first file that it finds for simplicity, but generally an app will add the property to every file that it finds.</span></span>  

```csharp
// Only indexed jpg files are going to be used 
QueryOptions option = new QueryOptions(CommonFileQuery.DefaultQuery, new string[] { ".jpg" }); 
option.IndexerOption = IndexerOption.OnlyUseIndexer; 
// Typically an app would loop over all the files in the library, updating them all with the new 
// value. To make the sample easier to understand however, this app is only going to update the  
// first file it finds 
var query = KnownFolders.PicturesLibrary.CreateFileQueryWithOptions(option); 
StorageFile file = (await query.GetFilesAsync()).FirstOrDefault(); 
if (file == null) 
{ 
    log("No jpg file found in the library. Stopping"); 
    return; 
} 
log("Found file: " + file.Path); 
// Selecting the property to modify and writing it out 
List<KeyValuePair<string, object>> props = new List<KeyValuePair<string, object>>();             
props.Add(new KeyValuePair<string, object>("System.Supplemental.ResourceId", fileId)); 
await file.Properties.SavePropertiesAsync(props); 
```

<span data-ttu-id="64781-154">重要なチェックがある場合は、プロパティを記述する前に、場所のインデックスを作成します。</span><span class="sxs-lookup"><span data-stu-id="64781-154">There is an important check if the location is indexed before writing out a property.</span></span> <span data-ttu-id="64781-155">このサンプルでは、場所をインデックス作成のみをフィルター処理、クエリ オプションを使用します。</span><span class="sxs-lookup"><span data-stu-id="64781-155">In this sample we are using the query options to filter to only indexed locations.</span></span> <span data-ttu-id="64781-156">これを実行できない場合は、親フォルダー ([ファイル] のインデックス付きの状態を確認できます。GetParentAsync() します。GetIndexedStateAsync()) します。</span><span class="sxs-lookup"><span data-stu-id="64781-156">If this isn’t feasible you can check the indexed state of the parent folder (file.GetParentAsync().GetIndexedStateAsync()).</span></span> <span data-ttu-id="64781-157">どちらの方法には、同じ結果が生じる場合します。</span><span class="sxs-lookup"><span data-stu-id="64781-157">Either way will yield the same results</span></span> 

### <a name="reading-supplemental-properties"></a><span data-ttu-id="64781-158">補足のプロパティの読み取り</span><span class="sxs-lookup"><span data-stu-id="64781-158">Reading supplemental properties</span></span> 
<span data-ttu-id="64781-159">もう一度、補足のプロパティの読み取りは、他のファイル システム プロパティを読み取ると同じです。</span><span class="sxs-lookup"><span data-stu-id="64781-159">Again, reading a supplemental property is the same as reading any other file system property.</span></span> <span data-ttu-id="64781-160">このサンプルでは、アプリがのみ 1 つのプロパティ ファイルからの読み取り、StorageFile が既にがもと同時に他のプロパティを読み取ることできます。</span><span class="sxs-lookup"><span data-stu-id="64781-160">In this sample the app will just read one property from a file it already has a StorageFile for, but it could also read other properties at the same time.</span></span>  

```csharp
// An object to hold the result from the indexer, and a string to store  
// the value in once we have confirmed it is valid. 
object uncheckedResourceId; 
string resourceId = ""; 
// Fetching the key value pair from the indexer 
IDictionary<string,object> returnedProps =  
    await file.Properties.RetrievePropertiesAsync(new string[] { "System.Supplemental.ResourceId" });             
if (returnedProps.TryGetValue("System.Supplemental.ResourceId", out uncheckedResourceId)) 
{ 
    if (uncheckedResourceId != null && !String.IsNullOrEmpty(uncheckedResourceId.ToString())) 
    { 
        resourceId = uncheckedResourceId.ToString(); 
    } 
} 
```
<span data-ttu-id="64781-161">チェックは、プロパティ システムから返される値が期待どおりになっていることを確認します。</span><span class="sxs-lookup"><span data-stu-id="64781-161">There is a check to make sure the value coming back from the property system is what you expect.</span></span> <span data-ttu-id="64781-162">可能性はありませんが、アプリが書き込まれるため、値がクリアされたことができます。</span><span class="sxs-lookup"><span data-stu-id="64781-162">Although it is unlikely, it is possible the value has been cleared since your app has written it.</span></span> <span data-ttu-id="64781-163">これについては、以下で詳しく説明します。</span><span class="sxs-lookup"><span data-stu-id="64781-163">This will be covered in detail below.</span></span>  

### <a name="implementation-notes"></a><span data-ttu-id="64781-164">実装に関する注意事項</span><span class="sxs-lookup"><span data-stu-id="64781-164">Implementation notes</span></span> 
<span data-ttu-id="64781-165">補足のプロパティのデザインに加えられたいくつかの微妙な選択肢があります。</span><span class="sxs-lookup"><span data-stu-id="64781-165">There are a few subtle choices that were made in the design of the supplemental properties.</span></span> <span data-ttu-id="64781-166">実装を支援するには、次のセクションでは、機能エンジニア リング設計仕様からコピーしました。</span><span class="sxs-lookup"><span data-stu-id="64781-166">To help with your implementation the following sections were copied from the engineering design spec for the feature.</span></span> <span data-ttu-id="64781-167">機能の設計方法と制限事項が存在する理由に、glimpse に関する情報を提供します。</span><span class="sxs-lookup"><span data-stu-id="64781-167">They provide a glimpse into how the feature was designed, and why some of the limitations exist.</span></span> 

### <a name="supplemental-properties-available"></a><span data-ttu-id="64781-168">使用できる補足プロパティ</span><span class="sxs-lookup"><span data-stu-id="64781-168">Supplemental properties available</span></span> 
<span data-ttu-id="64781-169">アプリを最初に使用できる 2 つのプロパティがあります。System.Supplemental.ResourceId System.Supplemental.AlbumID.</span><span class="sxs-lookup"><span data-stu-id="64781-169">There are only two properties available to use for apps initially: System.Supplemental.ResourceId and System.Supplemental.AlbumID.</span></span> <span data-ttu-id="64781-170">追加できる他の必要性がある場合</span><span class="sxs-lookup"><span data-stu-id="64781-170">If there is a need for more they can be added.</span></span> <span data-ttu-id="64781-171">アルバムの ID は、多様なアプリケーション用に使用できる複数値文字列と ResourceId は、同期のクラウド プロバイダーの一意の ID として使用されます。</span><span class="sxs-lookup"><span data-stu-id="64781-171">The album ID is a multi-value string that can be used for many different applications and the ResourceId is used as a unique ID for cloud sync providers.</span></span> 

#### <a name="file-system-support"></a><span data-ttu-id="64781-172">ファイル システムのサポート</span><span class="sxs-lookup"><span data-stu-id="64781-172">File System Support</span></span> 
<span data-ttu-id="64781-173">FAT 形式のリムーバブル メディアは、重要なシナリオ、補足のプロパティは FAT と NTFS ドライブをサポートします。</span><span class="sxs-lookup"><span data-stu-id="64781-173">Since FAT formatted removable media is an important scenario, supplemental properties will support FAT and NTFS drives.</span></span> <span data-ttu-id="64781-174">これにより、補足のプロパティは、デバイスの種類に関係なくすべてのユーザーに利用できるものが保証されます。</span><span class="sxs-lookup"><span data-stu-id="64781-174">This will ensure that the supplemental properties are going to be available for all users, regardless of their device type.</span></span>   

### <a name="non-indexed-locations"></a><span data-ttu-id="64781-175">インデックスのない場所</span><span class="sxs-lookup"><span data-stu-id="64781-175">Non-Indexed Locations</span></span>  
<span data-ttu-id="64781-176">デスクトップで多数のインデックス化されていないフォルダーがあります。</span><span class="sxs-lookup"><span data-stu-id="64781-176">On the desktop there are a number of folders that are not indexed.</span></span> <span data-ttu-id="64781-177">このような場合は、アプリが補足のプロパティにアクセスする可能性がありますも。</span><span class="sxs-lookup"><span data-stu-id="64781-177">In these cases, apps may still want to have access to supplemental properties.</span></span> <span data-ttu-id="64781-178">ただし、補足のプロパティでは、インデックス付きの場所の外部で使用できません。</span><span class="sxs-lookup"><span data-stu-id="64781-178">However, supplemental properties are not available outside of indexed locations.</span></span> <span data-ttu-id="64781-179">理由はいくつかのトレードオフが行われました。</span><span class="sxs-lookup"><span data-stu-id="64781-179">This trade-off was made for a couple of reasons:</span></span>  

- <span data-ttu-id="64781-180">既定ですべてのライブラリおよびクラウド ストレージの場所のインデックスが作成されます。</span><span class="sxs-lookup"><span data-stu-id="64781-180">All libraries and cloud storage locations are indexed by default.</span></span>   
  <span data-ttu-id="64781-181">これらの場所を主に使用するには、その UWP アプリには。</span><span class="sxs-lookup"><span data-stu-id="64781-181">These are the locations that UWP apps to be primarily using.</span></span> <span data-ttu-id="64781-182">インデックス付き (システムやネットワーク ドライブ) ではない他の場所があるが、ユーザー データを格納するため、使用頻度の低い。</span><span class="sxs-lookup"><span data-stu-id="64781-182">There are other locations that are not indexed (system or network drives) but they are less commonly used for storing user data.</span></span> 

- <span data-ttu-id="64781-183">WinRT API サーフェスの設計では、インデクサーが使用可能なほとんどの場合を前提としています。</span><span class="sxs-lookup"><span data-stu-id="64781-183">The WinRT API surface design assumes the indexer is almost always available.</span></span>  
  <span data-ttu-id="64781-184">したがって、インデクサーは既に使用可能なほとんどのアプリの関心のある場所です。</span><span class="sxs-lookup"><span data-stu-id="64781-184">Thus, the indexer is already available in most of the locations apps are interested in.</span></span> <span data-ttu-id="64781-185">インデックスのない場所にデータを保存するユーザーが見つかった場合、最も簡単なソリューションがその場所をインデックスに追加することになります。</span><span class="sxs-lookup"><span data-stu-id="64781-185">If users are found to be storing data in non-indexed locations, the easiest solution is going to be to add that location to the index.</span></span> <span data-ttu-id="64781-186">プロパティを補足し、作業、列挙体は、高速になり、アプリが変更できる場所を追跡します。</span><span class="sxs-lookup"><span data-stu-id="64781-186">Then supplemental properties work, enumeration will be faster, and apps will be able to change track the location.</span></span>

### <a name="reading-or-writing-supplemental-properties-from-a-file-in-a-non-indexed-location"></a><span data-ttu-id="64781-187">読み取りまたは書き込み Non-Indexed 場所にあるファイルからの補足のプロパティ</span><span class="sxs-lookup"><span data-stu-id="64781-187">Reading or Writing Supplemental Properties from a file in a Non-Indexed Location</span></span> 
<span data-ttu-id="64781-188">アプリが現在インデックス付けされていない場所に補足プロパティを記述しようとする場合は、API 呼び出しは例外をスローします。</span><span class="sxs-lookup"><span data-stu-id="64781-188">In the case that an app attempts to write a supplemental property to a location that is not currently indexed, then the API call will throw an exception.</span></span> <span data-ttu-id="64781-189">.Docx ファイルは (無効な引数) に System.Music.AlbumArtist の更新を試行したときに、としてスローされる例外と同じ例外になります。</span><span class="sxs-lookup"><span data-stu-id="64781-189">This will be the same exception that is thrown as when someone tries to update the System.Music.AlbumArtist on a .docx file (Invalid Args).</span></span>  
 
### <a name="change-notifications"></a><span data-ttu-id="64781-190">通知を変更します。</span><span class="sxs-lookup"><span data-stu-id="64781-190">Change notifications:</span></span>  
<span data-ttu-id="64781-191">UWP の変更通知され、変更の追跡は、標準のプロパティのように、補足のプロパティに対して動作する続行されます。</span><span class="sxs-lookup"><span data-stu-id="64781-191">The UWP change notifications and change tracking will continue to work for the supplemental properties as they do for the standard properties.</span></span> <span data-ttu-id="64781-192">これにより、アプリがアプリのいずれかに行われているすべての変更を追跡するためにデータを指定します。</span><span class="sxs-lookup"><span data-stu-id="64781-192">This will enable apps who are providing data to track all the changes happening to one of their apps</span></span> 
  
### <a name="invalidating-properties"></a><span data-ttu-id="64781-193">プロパティを無効にします。</span><span class="sxs-lookup"><span data-stu-id="64781-193">Invalidating properties:</span></span>  
<span data-ttu-id="64781-194">ファイルの補足のプロパティは、ファイルを変更またはシステムに移動したときに古くなる可能性があります。</span><span class="sxs-lookup"><span data-stu-id="64781-194">The supplemental properties on a file may become out of date whenever a file is modified or moved on the system.</span></span> <span data-ttu-id="64781-195">アプリのデータのプッシュは、データが有効か、システムは解明自体にするためのツールを提供だけを更新する必要がある場合について、情報のあるものになります。</span><span class="sxs-lookup"><span data-stu-id="64781-195">Apps pushing the data will be the ones with the information about if the data is valid or needs to be updated so the system will just provide the tools for them to figure it out themselves.</span></span>  
 
<span data-ttu-id="64781-196">場合は、ファイルが変更されたがいない移動または名前が変更された、ファイルのすべての補足プロパティは変更されません。</span><span class="sxs-lookup"><span data-stu-id="64781-196">In the case a file is modified, but not moved or renamed, all the supplemental properties on the file will remain unchanged.</span></span> <span data-ttu-id="64781-197">アプリは既存の API サーフェスでの変更通知を登録し、必要に応じてプロパティを更新することになります。</span><span class="sxs-lookup"><span data-stu-id="64781-197">The apps will be able to register for change notifications through the existing API surface and update the properties as needed.</span></span> 
 
<span data-ttu-id="64781-198">ファイルを移動すると、プロパティが無効にましょう。</span><span class="sxs-lookup"><span data-stu-id="64781-198">If the file is moved, the properties are going to be invalidated.</span></span> <span data-ttu-id="64781-199">アプリは削除するかの変更通知の受信、作成、名前の変更、または方法によって移動操作では正確に実行されます。</span><span class="sxs-lookup"><span data-stu-id="64781-199">The app will receive the change notifications of either delete, create, renamed, or moved depending on how exactly the operation is done.</span></span> <span data-ttu-id="64781-200">アプリが変更通知を受信した後は、ファイルを検査し、必要に応じて、ファイルの補足のプロパティを更新することがあります。</span><span class="sxs-lookup"><span data-stu-id="64781-200">Once the app has received the change notification it will be able to inspect the file and update the supplemental properties on the file as needed.</span></span> 
 
### <a name="indexer-rebuilds"></a><span data-ttu-id="64781-201">インデクサーを再構築します。</span><span class="sxs-lookup"><span data-stu-id="64781-201">Indexer rebuilds</span></span>  
<span data-ttu-id="64781-202">場合によってはシステム インデックスは、さまざまな理由の 1 つの再構築する必要があります。-プロパティ スキーマを変更することが、ユーザーには、EDP が有効にする可能性があります。 または単なるデータベース ファイルが破損します。</span><span class="sxs-lookup"><span data-stu-id="64781-202">Occasionally the system index has to be rebuilt for one of a number of reasons – the property schema could change, the user could enable EDP, or simply the database file could be corrupted.</span></span> <span data-ttu-id="64781-203">このような場合は、補足のプロパティは保持されません。</span><span class="sxs-lookup"><span data-stu-id="64781-203">In these cases, the supplemental properties will not be preserved.</span></span> <span data-ttu-id="64781-204">私たちは、インデックスが再構築されるが、いくつかの主要なブロックがあった場合に、補足のプロパティを保持するために作業を行うと見なされます。</span><span class="sxs-lookup"><span data-stu-id="64781-204">We considered doing the work to try to preserve the supplemental properties when the index is being rebuilt, but there were a couple of major blockers:</span></span>  

### <a name="protecting-the-data"></a><span data-ttu-id="64781-205">データを保護します。</span><span class="sxs-lookup"><span data-stu-id="64781-205">Protecting the data</span></span> 
<span data-ttu-id="64781-206">ディスク エラーまたは悪意のあるソフトウェアによって、データベース ファイルが破損している場合は、そのファイルに格納されたデータを保護することは不可能なります。</span><span class="sxs-lookup"><span data-stu-id="64781-206">In the case where the database file is corrupted, either by disk errors or rogue software, it is going to be impossible to protect the data that was stored in that file.</span></span> <span data-ttu-id="64781-207">システムの他の場所またはデータベースの残りの部分から何らかの形で分離を格納する必要があります。</span><span class="sxs-lookup"><span data-stu-id="64781-207">It would have to be stored somewhere else on the system or somehow isolated from the rest of the database.</span></span> 

<span data-ttu-id="64781-208">既に多くのインデックスが破損する可能性が低くする作業を行っている、ためこのケースの発生率をとにかくこれ低減されます。</span><span class="sxs-lookup"><span data-stu-id="64781-208">Since we are already doing a lot of work to make the index less likely to be corrupted, this will reduce the incidence rate of this case anyways.</span></span>  
<span data-ttu-id="64781-209">再構築中には、ファイルとそのメタデータの間のマッピングの保持</span><span class="sxs-lookup"><span data-stu-id="64781-209">Maintaining the mapping between files and their metadata during the rebuilds</span></span> 

<span data-ttu-id="64781-210">インデックス再構築、データを保護できます、場合でも、インデックスが再構築されるときに、ファイルが変更されたかどうかを把握することはできません。</span><span class="sxs-lookup"><span data-stu-id="64781-210">Even if the index can protect the data across a rebuild, it is impossible to know if the file has changed while the index was being rebuilt.</span></span> <span data-ttu-id="64781-211">インデックスは、ファイルから保護するデータは、ファイルを変更または移動する場合に有効なできなくする可能性があります。</span><span class="sxs-lookup"><span data-stu-id="64781-211">The data that the index is protecting from the file might be no longer valid if the file is modified or moved.</span></span>  
<span data-ttu-id="64781-212">動作</span><span class="sxs-lookup"><span data-stu-id="64781-212">Behaviour</span></span> 

<span data-ttu-id="64781-213">場合はインデクサーの再構築では、補足のすべてのデータが失われます。</span><span class="sxs-lookup"><span data-stu-id="64781-213">In the case of an indexer rebuild, all supplemental data will be lost.</span></span> <span data-ttu-id="64781-214">アプリは、再構築中に失われた、インデクサーにデータを戻す担当になります。</span><span class="sxs-lookup"><span data-stu-id="64781-214">Apps will be responsible for putting the data back into the indexer that was lost during the rebuild.</span></span> <span data-ttu-id="64781-215">これにより、余分な負荷をアプリの配置しますと思われる妥当なので、すべてのデータのマスターの状態は常に保持します。</span><span class="sxs-lookup"><span data-stu-id="64781-215">This does put an extra burden on the apps but is deemed reasonable since they will always hold the master state for all their data.</span></span>  

### <a name="recovering"></a><span data-ttu-id="64781-216">回復します。</span><span class="sxs-lookup"><span data-stu-id="64781-216">Recovering</span></span> 
<span data-ttu-id="64781-217">インデックスが再構築されるアプリが気付き後の都合のよい、補足のプロパティが更新されます。</span><span class="sxs-lookup"><span data-stu-id="64781-217">Once the apps have noticed that the index is being rebuilt, they will be responsible for updating the supplemental properties at their convenience.</span></span>  
### <a name="privacy"></a><span data-ttu-id="64781-218">プライバシー</span><span class="sxs-lookup"><span data-stu-id="64781-218">Privacy</span></span> 
<span data-ttu-id="64781-219">ファイルが書き込まれるプロパティの一部はユーザーに禁止するその他のアプリケーションと共有するようにでしょう。</span><span class="sxs-lookup"><span data-stu-id="64781-219">Some of the properties that might be written to the files are going to such that users may not want them to be shared with other applications.</span></span> <span data-ttu-id="64781-220">アプリのプロパティへの書き込みは、情報が、いずれかに private を指定しようとしていることを示すことができるよう、アプリケーションで他の少数のアプリケーションと共有またはパブリック システム上のすべてのアプリにします。</span><span class="sxs-lookup"><span data-stu-id="64781-220">Apps should be able to indicate that the information they are writing to the properties is going to be private to either their applications, shared with just a few other applications, or public to every app on the system.</span></span>  

<span data-ttu-id="64781-221">これは、一部の機能の早期採用者の面白い機能では可能性のある、設計に多くの価値を追加するパブリック プロパティの取得を移動も感じてください。</span><span class="sxs-lookup"><span data-stu-id="64781-221">Although this is potentially an interesting feature for some of the early adopters of the feature, they feel that getting public properties is still going to add a lot of value to the design.</span></span> <span data-ttu-id="64781-222">したがって、これには、優れたとしてマークされています、引き続きを必要な場合、値を非表示をサポートしていない機能をビルドする必要があります。</span><span class="sxs-lookup"><span data-stu-id="64781-222">Thus, this is marked as a nice to have, and we should continue to build the feature without support for hiding the values if required.</span></span> <span data-ttu-id="64781-223">任意の設計で考慮すべき重要なので後で追加することがより多くのシナリオを開きます。</span><span class="sxs-lookup"><span data-stu-id="64781-223">Adding it later will open up more scenarios, so it will be important to consider in any designs.</span></span>  

## <a name="conclusions"></a><span data-ttu-id="64781-224">結論</span><span class="sxs-lookup"><span data-stu-id="64781-224">Conclusions</span></span> 
<span data-ttu-id="64781-225">これで、補足のプロパティは、システムで複数のファイルのプロパティを格納する簡単な方法です。</span><span class="sxs-lookup"><span data-stu-id="64781-225">That’s it, supplemental properties are an easy way to store more file properties in the system.</span></span> <span data-ttu-id="64781-226">それらを使用してをすることはもちろん、省略可能ですが、アプリ、エッジの並べ替えし、データを迅速に検索することはできませんが、他のアプリ経由で。</span><span class="sxs-lookup"><span data-stu-id="64781-226">Using them is of course optional, but it can give your app an edge over other apps which aren’t able to sort and search their data as quickly.</span></span> 

<span data-ttu-id="64781-227">お楽しみにしてこれらのプロパティの使用を開始するアプリを表示します。</span><span class="sxs-lookup"><span data-stu-id="64781-227">We’re looking forward to seeing apps start to use these properties.</span></span> <span data-ttu-id="64781-228">使用する方法、ヘッダーご連絡ください下のコメントに質問がある場合</span><span class="sxs-lookup"><span data-stu-id="64781-228">If you have any questions about how using the header please let us know in the comments below</span></span> 
